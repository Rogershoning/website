---
import MainLayout from '../layouts/MainLayout.astro';
---
<MainLayout title="Contact">
	<main class="max-w-5xl mx-auto p-4 md:p-12 text-stone-700 text-left">
		<div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
			
			<!-- Linkerkolom: Tekst & Info -->
			<div class="space-y-8">
				<h1 class="text-5xl md:text-6xl font-bold italic leading-tight text-[#2D2D2D]">
					Neem <span class="text-[#FFB400]">Contact</span> op
				</h1>
				<p class="text-xl text-stone-500 italic font-light leading-relaxed">
					Bestel je honing uit Malden of stel een vraag over ecologie en 3D-printing.
				</p>
				
				<!-- Contactgegevens Onderaan de kolom -->
				<div class="pt-12 border-t border-stone-100 space-y-4">
					<div class="flex items-center gap-3 text-[#2D2D2D]">
						<span class="text-amber-500">ðŸ“§</span>
						<a href="mailto:roger@rogershoning.nl" class="font-bold hover:text-[#FFB400] transition-colors">roger@rogershoning.nl</a>
					</div>
					<div class="flex items-center gap-3 text-[#2D2D2D]">
						<span class="text-amber-500">ðŸ“ž</span>
						<a href="tel:0031625557035" class="font-bold hover:text-[#FFB400] transition-colors">0031 6 25 55 70 35</a>
					</div>
				</div>
			</div>

			<!-- Rechterkolom: Formulier -->
			<div class="bg-white p-8 md:p-12 rounded-[3.5rem] shadow-2xl border border-stone-100">
				<form id="contact-form" action="https://formspree.io" method="POST" class="space-y-5">
					<input type="text" name="name" placeholder="Je naam" required class="w-full bg-stone-50 border-none rounded-2xl p-4 outline-none focus:ring-2 focus:ring-[#FFB400] shadow-inner" />
					<input type="email" name="email" placeholder="E-mailadres" required class="w-full bg-stone-50 border-none rounded-2xl p-4 outline-none focus:ring-2 focus:ring-[#FFB400] shadow-inner" />
					<textarea name="message" placeholder="Je vraag of bestelling" rows="5" required class="w-full bg-stone-50 border-none rounded-2xl p-4 outline-none focus:ring-2 focus:ring-[#FFB400] shadow-inner resize-none"></textarea>
					
					<button type="submit" id="submit-btn" class="w-full bg-[#2D2D2D] text-white py-5 rounded-full font-black uppercase text-xs tracking-widest hover:bg-[#FFB400] hover:text-[#2D2D2D] transition-all shadow-xl active:scale-95">
						Verstuur bericht
					</button>
					
					<p id="status" class="text-[10px] font-black uppercase tracking-widest text-center mt-4"></p>
				</form>
			</div>
		</div>
	</main>

	<script is:inline>
		const form = document.getElementById("contact-form");
		const status = document.getElementById("status");
		const btn = document.getElementById("submit-btn");

		form.addEventListener("submit", async (e) => {
			e.preventDefault();
			const data = new FormData(form);
			btn.disabled = true;
			btn.innerHTML = "BEZIG MET VERZENDEN...";
			status.innerHTML = "";

			try {
				const response = await fetch(form.action, {
					method: 'POST',
					body: data,
					headers: { 'Accept': 'application/json' }
				});
				
				if (response.ok) {
					status.style.color = "#16a34a"; // Groen
					status.innerHTML = "BEDANKT! JE BERICHT IS VERZONDEN.";
					form.reset();
				} else {
					const result = await response.json();
					status.style.color = "#dc2626"; // Rood
					status.innerHTML = result.errors ? result.errors.map(error => error.message).join(", ") : "OEPS! ER GING IETS MIS.";
				}
			} catch (error) {
				status.style.color = "#dc2626";
				status.innerHTML = "VERBINDINGSFOUT. PROBEER HET LATER OPNIEUW.";
			} finally {
				btn.disabled = false;
				btn.innerHTML = "VERSTUUR BERICHT";
			}
		});
	</script>
</MainLayout>
